<!DOCTYPE html><!--[if lt IE 7]> <html class="no-js ie6 oldie" lang="en"> <![endif]-->
<!--[if IE 7]> <html class="no-js ie7 oldie" lang="en"> <![endif]-->
<!--[if IE 8]> <html class="no-js ie8 oldie" lang="en"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"> <!--<![endif]--><html xmlns="http://www.w3.org/1999/xhtml"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"><title>Node.js Manual TEST - </title><meta name="generator" content="panino-doc-build"><meta name="author" content="Garen J. Torikian"><meta name="viewport" content="width=device-width,initial-scale=1"><link rel="stylesheet" href="./assets/csses/bootstrap.min.css"><link rel="stylesheet" href="./assets/csses/prettify.css"><link rel="stylesheet" href="./assets/csses/refguide_overrides.css"><link href="./assets/images/favicon.ico" rel="icon" type="image/x-icon"><link type="text/css" rel="stylesheet" href="http://yandex.st/highlightjs/6.1/styles/vs.min.css"><script src="./assets/javascripts/jquery.js"></script><script src="./assets/javascripts/clicker.js"></script><script src="./assets/javascripts/jquery.collapse.js"></script><script src="./assets/javascripts/jquery.cookie.js"></script><script src="./assets/javascripts/bootstrap-dropdown.js"></script><script src="./assets/javascripts/jquery-scrollspy.js"></script><script src="./assets/javascripts/prettify-extension.js"></script></head><body><div class="navbar navbar-fixed-top"><div class="navbar-inner"><div id="topSection" class="container"><ul class="nav topLinks"></ul><form id="searchbox" action="" class="navbar-search pull-right"> <input name="query" type="text" placeholder="Search the API" title="Search across all the documentation" class="search-query span3"></form></div></div></div><div id="nonFooter"><div id="wrapper"><div class="content"><div class="row centerpiece"><div id="sidebarContainer" class="span3"><div id="sidebar"><!--include _menu.jade--></div></div><div id="mainContent" class="span9"><div id="documentation"><div class="classContent"><div class="membersBackground"></div><div class=" members pos0"><div class=" membersContent pos0"><h1 class="memberHeader"><span class="name">repl</span></h1><ul data-tabs="tabs" class="nav tabs pos0"><li data-dropdown="dropdown" class="dropdown"><ul class="dropdown-menu"></ul></li><li data-dropdown="dropdown" class="dropdown"><ul class="dropdown-menu"></ul></li><li data-dropdown="dropdown" class="dropdown"><a href="#" data-toggle="dropdown" class="dropdown-toggle"><span>Functions (1)</span><b class="caret"></b></a><ul class="dropdown-menu"><li data-id="repl.start" class="memberLink"><a href="#repl.start" class="" title="repl.start (class method)" data-id="repl.start">start</a></li></ul></li><li data-dropdown="dropdown" class="dropdown"><ul class="dropdown-menu"></ul></li><li data-dropdown="dropdown" class="dropdown"><ul class="dropdown-menu"></ul></li><li data-dropdown="dropdown" class="dropdown"><ul class="dropdown-menu"></ul></li><li data-dropdown="dropdown" class="dropdown"><ul class="dropdown-menu"></ul></li></ul></div></div><article id="repl" data-title="repl (class)" class="article"><div class="section description"><div class="memberContent"><p>A Read-Eval-Print-Loop (REPL) is available both as a standalone program and
easily includable in other programs. The REPL provides a way to interactively
run JavaScript and see the results.  It can be used for debugging, testing, or
just trying things out.</p>
<p>By executing <code>node</code> without any arguments from the command line, you&#39;ll be
dropped into the REPL. It has a simplistic emacs line-editing:</p>
<pre><code>mjr:~$ node
Type <span class="string">'.help'</span> <span class="keyword">for</span> options.
> a = [ <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];
[ <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span> ]
> a.forEach(<span class="keyword">function</span> (v) {
<span class="keyword">...</span>   console.log(v);
<span class="keyword">...</span>   });
<span class="number">1</span>
<span class="number">2</span>
<span class="number">3</span></code></pre>
<p>For advanced line-editors, start <code>node</code> with the environmental variable
<code>NODE_NO_READLINE=1</code>. This will start the main and debugger REPL in canonical
terminal settings which allow you to use with <code>rlwrap</code>.</p>
<p>For a quicker configuration, you could add this to your <code>.bashrc</code> file:</p>
<pre><code><span class="title">alias</span> node=<span class="string">"env NODE_NO_READLINE=1 rlwrap node"</span></code></pre>
<h4>REPL Features</h4>
<p>Inside the REPL, multi-line expressions can be input, and tab completion is
supported for both global and local variables.</p>
<p>The special variable <code>_</code> contains the result of the last expression, like so:</p>
<pre><code>> [ <span class="string">"a"</span>, <span class="string">"b"</span>, <span class="string">"c"</span> ]
[ <span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span> ]
> _<span class="variable">.length</span>
<span class="number">3</span>
> _ += <span class="number">1</span>
<span class="number">4</span></code></pre>
<p>The REPL provides access to any variables in the global scope. You can expose a
variable to the REPL explicitly by assigning it to the <code>context</code> object
associated with each <code>REPLServer</code>.  For example:</p>
<pre><code>// repl_test<span class="preprocessor">.js</span>
var repl = require(<span class="string">"repl"</span>),
    msg = <span class="string">"message"</span><span class="comment">;</span>

repl<span class="preprocessor">.start</span>()<span class="preprocessor">.context</span><span class="preprocessor">.m</span> = msg<span class="comment">;</span></code></pre>
<p>Things in the <code>context</code> object appear as local within the REPL:</p>
<pre><code><span class="method">mjr:</span>~<span class="char">$ </span>node repl_test.js
> m
<span class="string">'message'</span></code></pre>
<h4>Special Commands</h4>
<p>There are a few special REPL commands:</p>
<ul>
<li><code>.break</code>: while inputting a multi-line expression, sometimes you get lost or
just don&#39;t care about completing it; this wipes it out so you can start over</li>
<li><code>.clear</code>: resets the <code>context</code> object to an empty object and clears any
multi-line expression.</li>
<li><code>.exit</code>: closes the I/O stream, which causes the REPL to exit.</li>
<li><code>.help</code>: shows this list of special commands</li>
<li><code>.save</code>: save the current REPL session to a file, like so: <code>&gt;.save
./file/to/save.js</code></li>
<li><code>.load</code>: loads a file into the current REPL session, like so: <code>&gt;.load
./file/to/load.js</code></li>
</ul>
<h4>Key Combinations</h4>
<p>The following key combinations in the REPL have special effects:</p>
<ul>
<li><code>&lt;ctrl&gt;C</code> - Similar to the <code>.break</code> keyword, this terminates the current
command.  Press twice on a blank line to forcibly exit the REPL.</li>
<li><code>&lt;ctrl&gt;D</code> - Similar to the <code>.exit</code> keyword, it closes to stream and exits
the REPL</li>
</ul>
</div></div><div class="section namespaces"><!-- <h3>Namespaces</h3><div class="memberContent"><ul class="method-details-list"><li class="method-description"><h4><a href="#repl.exit" class="" title="repl@exit (namespace)" data-id="repl@exit">repl@exit</a></h4><p>Emitted when the user exits the REPL in any of the defined ways. Namely, typing
<code>.exit</code> at the repl, pressing Ctrl+C twice to signal SIGINT, or pressing Ctrl+D
to signal &quot;end&quot; on the <code>input</code> stream.</p>
</li></ul></div>--></div></article><article id="repl.event.exit" data-title="repl@exit (namespace)" class="article"><div class="section description"><div class="memberContent"><p>Emitted when the user exits the REPL in any of the defined ways. Namely, typing
<code>.exit</code> at the repl, pressing Ctrl+C twice to signal SIGINT, or pressing Ctrl+D
to signal &quot;end&quot; on the <code>input</code> stream.</p>
<h4>Example: Listening for <code>exit</code></h4>
<pre><code>r.<span class="keyword">on</span>(<span class="comment">'exit', function () {</span>
  console.<span class="built_in">log</span>(<span class="comment">'Got "exit" event from repl!');</span>
  process.<span class="keyword">exit</span>();
});</code></pre>
</div></div></article><h3 class="sectionHeader">Methods</h3><article id="repl.start" data-title="repl.start (class method)" class="article"><div class="section method"><div class="memberContent"><div class="title"><ul class="signatures"><li class="signature"><ul><li class="signature-call"><span id="repl.start" class="member-name methodClicker"><span class="sigClassName">repl.</span><span class="sigMemberName">start</span></span></li></ul><ul class="metaInfo"></ul></li></ul></div><div class="sideToggler"><div id="ellipsis_repl.start" class="ellipsis_description"><p>Returns and starts a <code>REPLServer</code> instance.</p>
</div><div id="short_repl.start" class="short_description hiddenSpan"><p>Returns and starts a <code>REPLServer</code> instance.</p>
<p><code>options</code> is an object with following properties:</p>
<ul>
<li><p><code>prompt</code>: The starting prompt and <code>stream</code> for all I/O. Defaults to <code>&gt; </code>.</p>
<ul>
<li><p><code>input</code>: The readable stream to listen to. Defaults to <code>process.stdin</code>.</p>
</li>
<li><p><code>output</code>: The writable stream to write readline data to. Defaults to
<code>process.stdout</code>.</p>
</li>
<li><p><code>terminal</code>: Pass <code>true</code> if the <code>stream</code> should be treated like a TTY, and
have ANSI/VT100 escape codes written to it. Defaults to checking <code>isTTY</code>
on the <code>output</code> stream upon instantiation.</p>
</li>
<li><p><code>eval</code>: An asynchronous wrapper function that is used to eval each given
line. Defaults to an async wrapper for <code>eval()</code>. See below for an example of
a custom <code>eval</code>.</p>
</li>
<li><p><code>useColors</code>: Specifies whether the <code>writer</code> function
should output colors. If a different <code>writer</code> function is set then this does
nothing. Defaults to the repl&#39;s <code>terminal</code> value.</p>
</li>
<li><p><code>useGlobal</code>: Specifies whether the repl uses the <code>global</code> object,
instead of running scripts in a separate context. Defaults to <code>false</code>.</p>
</li>
<li><p><code>ignoreUndefined</code>: Specifies whether the repl should output the
return value of a command if it&#39;s <code>undefined</code>. Defaults to <code>false</code>.</p>
</li>
<li><p><code>writer</code>: The function to invoke for each command that gets evaluated which
returns the formatting (including coloring) to display. Defaults to
<code>util.inspect</code>.</p>
</li>
</ul>
</li>
</ul>
<p> You can use your own <code>eval</code> function if it has the following signature:</p>
<pre><code><span class="function"><span class="keyword">function</span> <span class="title">eval</span><span class="params">(cmd, context, filename, callback)</span> {</span>
  callback(<span class="literal">null</span>, result);
}</code></pre>
<p>Multiple REPLs can be started against the same running instance of node.  Each
share the same global object but will have unique I/O.</p>
<h4>Examples</h4>
 <script src='http://snippets.c9.io/github.com/c9/nodemanual.org-examples/nodejs_ref_guide/repl/repl.start.js?linestart=3&lineend=0&showlines=false' defer='defer'></script>

<p>For an example of running a &quot;full-featured&quot; (<code>terminal</code>) REPL over
a <code>net.Server</code> and <code>net.Socket</code> instance, see: <a href="https://gist.github.com/2209310">https://gist.github.com/2209310</a></p>
<p>For an example of running a REPL instance over <code>curl(1)</code>,
see: <a href="https://gist.github.com/2053342">https://gist.github.com/2053342</a></p>
</div><h3 id="repl.start" class="methodToggle methodClicker inactive">&nbsp;&nbsp;&nbsp;</h3><div class="description"><p><code>options</code> is an object with following properties:</p>
<ul>
<li><p><code>prompt</code>: The starting prompt and <code>stream</code> for all I/O. Defaults to <code>&gt; </code>.</p>
<ul>
<li><p><code>input</code>: The readable stream to listen to. Defaults to <code>process.stdin</code>.</p>
</li>
<li><p><code>output</code>: The writable stream to write readline data to. Defaults to
<code>process.stdout</code>.</p>
</li>
<li><p><code>terminal</code>: Pass <code>true</code> if the <code>stream</code> should be treated like a TTY, and
have ANSI/VT100 escape codes written to it. Defaults to checking <code>isTTY</code>
on the <code>output</code> stream upon instantiation.</p>
</li>
<li><p><code>eval</code>: An asynchronous wrapper function that is used to eval each given
line. Defaults to an async wrapper for <code>eval()</code>. See below for an example of
a custom <code>eval</code>.</p>
</li>
<li><p><code>useColors</code>: Specifies whether the <code>writer</code> function
should output colors. If a different <code>writer</code> function is set then this does
nothing. Defaults to the repl&#39;s <code>terminal</code> value.</p>
</li>
<li><p><code>useGlobal</code>: Specifies whether the repl uses the <code>global</code> object,
instead of running scripts in a separate context. Defaults to <code>false</code>.</p>
</li>
<li><p><code>ignoreUndefined</code>: Specifies whether the repl should output the
return value of a command if it&#39;s <code>undefined</code>. Defaults to <code>false</code>.</p>
</li>
<li><p><code>writer</code>: The function to invoke for each command that gets evaluated which
returns the formatting (including coloring) to display. Defaults to
<code>util.inspect</code>.</p>
</li>
</ul>
</li>
</ul>
<p> You can use your own <code>eval</code> function if it has the following signature:</p>
<pre><code><span class="function"><span class="keyword">function</span> <span class="title">eval</span><span class="params">(cmd, context, filename, callback)</span> {</span>
  callback(<span class="literal">null</span>, result);
}</code></pre>
<p>Multiple REPLs can be started against the same running instance of node.  Each
share the same global object but will have unique I/O.</p>
<h4>Arguments</h4><table class="argumentTable argument-list table table-striped table-bordered"><tr class="argumentRow "><td class="argName ">options</td><td class="argType" "><a href="http://www.nodemanual.org/latest/js_doc/Object.html" class="" title="Object" data-id="Object">Object</a></td><td class="argDescription ">Required. Configuration options for the REPL</td></tr></table></div></div></div></div></article></div></div><div id="disqus_thread"></div></div></div></div></div><div class="push"></div></div><div id="footer"><div class="footerInner"><div class="footer-text">&#169; 2012:</div></div></div><!-- scripts concatenated and minified via ant build script--><script defer src="./assets/javascripts/plugins.js"></script>
<script defer src="./assets/javascripts/prettify.js"></script>
<script defer src="./assets/javascripts/prettify-extension.js"></script>
<script defer src="./assets/javascripts/ux.js"></script><!-- end scripts--><!--[if lt IE 7]><script src="//ajax.googleapis.com/ajax/libs/chrome-frame/1.0.3/CFInstall.min.js"></script><script>window.attachEvent('onload',function(){CFInstall.check({mode:'overlay'})})
</script><![endif]--></body></html>